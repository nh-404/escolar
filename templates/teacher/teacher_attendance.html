{% extends 'base/base_teacher.html' %}
{% load static %}
{% block title %}Attendance{% endblock title %}

{% block teacher_dashboard %}
   
<!-- Attendance Page -->
<div id="attendance" class="page-container">
  <div class="bg-white p-6 rounded-lg shadow-md mb-6">
    <div class="flex justify-between items-center mb-6">
      <h3 class="text-lg font-semibold">Attendance Management</h3>
      
      <!-- Class & Date (optional filters) -->
      <div class="flex items-center space-x-4">
        <select class="border rounded-md py-2 px-3 focus:outline-none focus:ring-2 focus:ring-blue-400">
          <option>Select Class</option>
          {% for class in classes %}
            <option>{{ class }}</option>
          {% endfor %}
        </select>
        <input type="date" name="date" value="{{ today|date:'Y-m-d' }}" 
               class="border rounded-md py-2 px-3 focus:outline-none focus:ring-2 focus:ring-blue-400">
      </div>
    </div>
    
    <!-- Attendance Form -->
    <form method="POST" action="{% url 'teacher_student_attendence' %}">
      {% csrf_token %}
      <input type="hidden" name="date" value="{{ today|date:'Y-m-d' }}">

      <div class="overflow-x-auto">
        <table class="w-full">
          <thead>
            <tr class="text-left text-gray-500 text-sm border-b">
              <th class="pb-3">No.</th>
              <th class="pb-3">Student ID</th>
              <th class="pb-3">Name</th>
              <th class="pb-3">Class</th>
              <th class="pb-3">Action</th>
            </tr>
          </thead>
          <tbody>
            {% for student in students %}
            <tr class="border-b">
              <td class="py-4">{{ forloop.counter }}</td>
              <td class="py-4">{{ student.roll_number }}</td>
              <td class="py-4">{{ student.full_name }}</td>
              <td class="py-4">{{ student.class_name }}</td>
              <td class="py-4 ">
                <select name="attendance_{{ student.id }}" 
                        class="border rounded-md py-1 px-2 focus:outline-none focus:ring-2 focus:ring-blue-400">
                  <option value="Present">Present</option>
                  <option value="Absent">Absent</option>
                  <option value="Late">Late</option>
                  <option value="Excused">Excused</option>
                </select>
              </td>
            </tr>
            {% empty %}
            <tr>
              <td colspan="4" class="py-4 text-center text-gray-500">No students found.</td>
            </tr>
            {% endfor %}
          </tbody>
        </table>
      </div>
      
      <div class="mt-6 flex justify-end">
        <button type="submit" 
                class="bg-blue-600 text-white px-4 py-2 rounded-md hover:bg-blue-700 transition">
          <i class="fas fa-save mr-2"></i> Save Attendance
        </button>
      </div>
    </form>
  </div>
</div>
{% endblock %}
